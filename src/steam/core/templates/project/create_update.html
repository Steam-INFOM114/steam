{% extends 'base.html' %}

{% block title %}{% if project.pk %}Modifier{% else %}Créer{% endif %} un projet{% endblock %}

{% block content %}
<div class="container mt-4 mb-4">
  <div class="row d-flex justify-content-center align-items-center h-100">
    <div class="col-xl-9">
      <div class="card" style="border-radius: 15px;">
        <div class="card-header">
          <h2>{% if project.pk %}Modifier{% else %}Créer{% endif %} un projet</h2>
        </div>
        <div class="card-body">
          <form method="POST">
            {% csrf_token %}
          <div class="row align-items-center pt-4 pb-3">
            <div class="col-md-3 ps-5">
              <h6 class="mb-0">Nom</h6>
            </div>
            <div class="col-md-9 pe-5">
              <input type="text" name="name" class="form-control" placeholder="Nom du projet" value="{{ project.name }}">
            </div>
          </div>
          <hr class="mx-n3">
          <div class="row align-items-center py-3">
            <div class="col-md-3 ps-5">
              <h6 class="mb-0">Description</h6>
            </div>
            <div class="col-md-9 pe-5">
              <textarea name="description" class="form-control" rows="3" placeholder="Description du projet" >{{ project.description }}</textarea>
            </div>
          </div>
          <hr class="mx-n3">
          <div class="row align-items-center py-3">
            <div class="col-md-3 ps-5">
              <h6 class="mb-0">Date de début</h6>
            </div>
            <div class="col-md-9 pe-5">
              <input type="date" name="start_date" class="form-control" value="{{ project.start_date|date:'Y-m-d' }}"/>
            </div>
          </div>
          <hr class="mx-n3">
          <div class="row align-items-center py-3">
            <div class="col-md-3 ps-5">
              <h6 class="mb-0">Date de fin</h6>
            </div>
            <div class="col-md-9 pe-5">
              <input type="date" name="end_date" class="form-control" value="{{ project.end_date|date:'Y-m-d' }}"/>
            </div>
          </div>
          <hr class="mx-n3">
          <div class="row align-items-center py-3">
            <div class="col-md-3 ps-5">
              <h6 class="mb-0">Propriétaire</h6>
            </div>
            <div class="col-md-9 pe-5">
              <select name="owner" class="form-select">
                {% for user in users %}
                  <option value="{{ user.id }}"
                    {% if user.id == project.owner_id %}selected{% endif %}>
                    {{ user }}
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>
          <hr class="mx-n3">
          <div class="row align-items-center py-3">
            <div class="col-md-3 ps-5">
              <h6 class="mb-0">Membres</h6>
            </div>
            <div class="col-md-9 pe-5">
              <select name="members" class="form-select" size="3" multiple>
                {% for user in users %}
                  <option value="{{ user.id }}"
                    {% if user in project.members.all %}selected{% endif %}>
                    {{ user }}
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>
          <hr class="mx-n3">
          <div class="px-5 py-4">
            <button type="submit" class="btn btn-primary btn-lg">{% if project.pk %}Modifier{% else %}Créer{% endif %}</button>
          </div>
        </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
